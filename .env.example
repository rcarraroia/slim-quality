# Slim Quality - Variáveis de Ambiente (EXEMPLO)
# ⚠️ Copie este arquivo para .env e preencha com valores reais
# ⚠️ NUNCA COMMITAR O ARQUIVO .env NO GIT

# ============================================
# JWT - Autenticação de Admins
# ============================================
# Gerar com: openssl rand -base64 32
JWT_SECRET=your-secret-key-here
JWT_REFRESH_SECRET=your-refresh-secret-key-here

# ============================================
# SUPABASE
# ============================================
SUPABASE_URL=https://seu-projeto.supabase.co
NEXT_PUBLIC_SUPABASE_URL=https://seu-projeto.supabase.co
SUPABASE_ANON_KEY=sua-anon-key-aqui
NEXT_PUBLIC_SUPABASE_ANON_KEY=sua-anon-key-aqui
SUPABASE_SERVICE_ROLE_KEY=sua-service-role-key-aqui

# ============================================
# ASAAS - Gateway de Pagamento
# ============================================
# Documentação: https://docs.asaas.com
# Criar conta: https://www.asaas.com/cadastro

# API Key
# Sandbox: Para testes (https://sandbox.asaas.com)
# Production: Para produção (https://www.asaas.com)
ASAAS_API_KEY=sua-chave-asaas-aqui
ASAAS_ENVIRONMENT=sandbox

# Wallet IDs
# ⚠️ IMPORTANTE: NÃO incluir ASAAS_WALLET_FABRICA
# A fábrica recebe o restante (70%) automaticamente
# Apenas configurar wallets que receberão splits:
# Formato: UUID v4 (ex: cd912fa1-5fa4-4d49-92eb-b5ab4dfba961)
# Obter em: Asaas > Configurações > Integrações > Wallet ID
ASAAS_WALLET_RENUM=xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx
ASAAS_WALLET_JB=xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx

# Webhook Token
# ⚠️ Gerar um UUID v4 forte para validação de webhooks
# Gerador: https://www.uuidgenerator.net/
# Este token será enviado no header 'asaas-access-token'
ASAAS_WEBHOOK_TOKEN=xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx

# URLs da API (não alterar)
ASAAS_API_URL_SANDBOX=https://api-sandbox.asaas.com/v3
ASAAS_API_URL_PRODUCTION=https://api.asaas.com/v3

# ============================================
# APP
# ============================================
NODE_ENV=development
PORT=3000

# ============================================
# FRONTEND (Vite)
# ============================================
# Variáveis devem começar com VITE_
VITE_API_URL=https://api.slimquality.com.br
VITE_SUPABASE_URL=https://seu-projeto.supabase.co
VITE_SUPABASE_ANON_KEY=sua-anon-key-aqui

# Wallet IDs para frontend (cálculo de splits)
# ⚠️ IMPORTANTE: Mesmos valores de ASAAS_WALLET_*
# Formato: UUID v4 (ex: cd912fa1-5fa4-4d49-92eb-b5ab4dfba961)
VITE_ASAAS_WALLET_RENUM=xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx
VITE_ASAAS_WALLET_JB=xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx

# ============================================
# OPENAI - Whisper e TTS
# ============================================
# Documentação: https://platform.openai.com/docs
# Criar conta: https://platform.openai.com/signup
# API Keys: https://platform.openai.com/api-keys

# API Key da OpenAI
OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Configurações Whisper (Transcrição de Áudio)
WHISPER_MODEL=whisper-1
WHISPER_LANGUAGE=pt
WHISPER_TIMEOUT=30

# Configurações TTS (Text-to-Speech)
TTS_MODEL=tts-1-hd
TTS_VOICE=nova
TTS_FORMAT=opus
TTS_TIMEOUT=20

# ============================================
# EVOLUTION API - WhatsApp
# ============================================
# Documentação: https://doc.evolution-api.com
# Para envio de mídia (imagens e áudios)

EVOLUTION_API_URL=http://localhost:8080
EVOLUTION_API_KEY=sua-api-key-evolution-aqui
EVOLUTION_INSTANCE=slim_quality

# ============================================
# SICC - Sistema de Inteligência Corporativa
# ============================================

# Banco de Dados
DB_HOST=localhost
DB_PORT=5432
DB_NAME=sicc_db
DB_USER=postgres
DB_PASSWORD=sua-senha-postgres-aqui

# Embeddings e IA
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_CACHE_DIR=./models
EMBEDDING_BATCH_SIZE=32
EMBEDDING_MAX_LENGTH=512
EMBEDDING_USE_GPU=false

# Configurações de Aprendizado
MIN_PATTERN_OCCURRENCES=3
SIMILARITY_THRESHOLD=0.85
MAX_PATTERNS_PER_CATEGORY=50
AUTO_APPROVAL_ENABLED=true
HUMAN_APPROVAL_THRESHOLD=0.95

# Performance e Processamento
ASYNC_PROCESSING=true
MAX_CONCURRENT_EMBEDDINGS=5
QUEUE_MAX_SIZE=1000
MEMORY_CACHE_SIZE=10000
PATTERN_CACHE_TTL=24

# Limpeza Automática
AUTO_CLEANUP=true
CLEANUP_INTERVAL=24
MAX_MEMORY_AGE=90

# Monitoramento e Métricas
METRICS_ENABLED=true
METRICS_RETENTION=30
ALERTS_ENABLED=true
ALERT_EMAIL=admin@slimquality.com.br

# Thresholds de Performance
MAX_RESPONSE_TIME=2.0
MIN_SUCCESS_RATE=0.85
MAX_ERROR_RATE=0.05

# Configurações Gerais SICC
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=INFO

# ============================================
# INSTRUÇÕES DE CONFIGURAÇÃO
# ============================================

# 1. SUPABASE
#    - Acesse: https://supabase.com/dashboard
#    - Copie as credenciais do seu projeto
#    - Cole nas variáveis SUPABASE_*

# 2. ASAAS SANDBOX (Para testes)
#    - Crie conta: https://sandbox.asaas.com/cadastro
#    - Acesse: Integrações > API
#    - Copie a API Key do Sandbox
#    - Configure ASAAS_ENVIRONMENT=sandbox

# 3. ASAAS WALLET IDs
#    - Cada pessoa que receberá comissões precisa ter conta no Asaas
#    - Wallet ID é retornado ao criar subconta via API
#    - Ou consulte via: GET /v3/wallets
#    - Configure apenas RENUM e JB (fábrica recebe automaticamente)

# 4. WEBHOOK TOKEN
#    - Gere um UUID v4 forte
#    - Configure no Asaas: Integrações > Webhooks
#    - Use o mesmo token aqui e no Asaas

# 5. ASAAS PRODUCTION (Quando for para produção)
#    - Crie conta: https://www.asaas.com/cadastro
#    - Obtenha API Key de produção
#    - Configure ASAAS_ENVIRONMENT=production
#    - ⚠️ Teste TUDO em sandbox antes!

# ============================================
# CARTÕES DE TESTE (SANDBOX)
# ============================================
# Aprovado: 5162306219378829 (Mastercard)
# Rejeitado: 5184019740373151 (Mastercard)

# ============================================
# IPs OFICIAIS DO ASAAS (Para firewall)
# ============================================
# 52.67.12.206
# 18.230.8.159
# 54.94.136.112
# 54.94.183.101

# ============================================
# SUBSCRIPTION PAYMENT FLOW (ISOLATED)
# ============================================
# Configurações específicas para o novo fluxo de assinaturas
# Baseado na arquitetura comprovada do sistema Comademig

# Polling Configuration (Comademig Pattern)
SUBSCRIPTION_POLLING_TIMEOUT=15000
SUBSCRIPTION_POLLING_INTERVAL=1000
SUBSCRIPTION_POLLING_MAX_ATTEMPTS=15

# Retry Configuration (Exponential Backoff)
SUBSCRIPTION_RETRY_MAX_ATTEMPTS=3
SUBSCRIPTION_RETRY_BASE_DELAY=1000
SUBSCRIPTION_RETRY_MAX_DELAY=10000
SUBSCRIPTION_RETRY_BACKOFF_MULTIPLIER=2

# Feature Flags (Control and Rollback)
SUBSCRIPTION_FLOW_ENABLED=true
SUBSCRIPTION_FALLBACK_ENABLED=true
SUBSCRIPTION_DEBUG_LOGS=true

# Webhook Configuration (Isolated from existing)
SUBSCRIPTION_WEBHOOK_TOKEN=xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx
SUBSCRIPTION_WEBHOOK_URL=/api/subscriptions/webhook

# Database Configuration (Isolated Tables)
SUBSCRIPTION_DB_SCHEMA=public
SUBSCRIPTION_TABLE_PREFIX=subscription_

# Monitoring and Alerts
SUBSCRIPTION_METRICS_ENABLED=true
SUBSCRIPTION_ALERTS_ENABLED=true
SUBSCRIPTION_ALERT_EMAIL=admin@slimquality.com.br

# Performance Thresholds
SUBSCRIPTION_MAX_RESPONSE_TIME=2000
SUBSCRIPTION_MIN_SUCCESS_RATE=0.95
SUBSCRIPTION_MAX_ERROR_RATE=0.05